<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Sentiment Watchdog - Chatbot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Georgia:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='home.js') }}" defer></script>
</head>
<body class="bg-radial-pink d-flex flex-column min-vh-100 position-relative">
    <!-- Organic Blobs -->
    <div class="blob top-left"></div>
    <div class="blob top-right"></div>
    <div class="blob bottom-left"></div>
    <div class="blob bottom-right"></div>
    <div class="container my-5 flex-grow-1">
        <h1 class="display-4 text-center" style="font-family: Georgia, serif; color: #1e3a8a;">Chat with Us!</h1>
        <div class="chat-container card shadow-sm p-3 mt-4" style="height: 500px; overflow-y: auto; background: rgba(255, 255, 255, 0.8);">
            <div id="chat-messages" class="mb-3"></div>
        </div>
        <div class="input-group mt-3">
            <input type="text" id="user-input" class="form-control" placeholder="Type your message...">
            <button class="btn btn-cta" onclick="sendMessage()">Send</button>
        </div>
    </div>
    <footer class="bg-theme text-white text-center py-3 mt-auto">
        <p class="mb-0">Built by Shweta | Â© 2025 Sentiment Watchdog</p>
    </footer>
    <!-- Theme Toggle -->
    <div class="form-check form-switch position-absolute top-0 end-0 m-3">
        <input class="form-check-input theme-toggle" type="checkbox" id="themeToggle">
        <label class="form-check-label text-white" for="themeToggle">Dark Mode</label>
    </div>
    <script>
        function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            if (message) {
                addMessage('You: ' + message, 'user');
                fetch('/get_response', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: message })
                })
                .then(response => response.json())
                .then(data => addMessage('Bot: ' + data.response, 'bot'))
                .catch(error => addMessage('Bot: Error occurred!', 'bot'));
                input.value = '';
            }
        }

        function addMessage(text, sender) {
            const messages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `mb-2 ${sender}-message`;
            messageDiv.textContent = text;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
    <style>
        .user-message { text-align: right; color: #1e3a8a; }
        .bot-message { text-align: left; color: #6b21a8; }
    </style>
</body>
</html>